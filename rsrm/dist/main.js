!function(t){function e(e){for(var n,i,s=e[0],d=e[1],l=e[2],u=0,m=[];u<s.length;u++)i=s[u],o[i]&&m.push(o[i][0]),o[i]=0;for(n in d)Object.prototype.hasOwnProperty.call(d,n)&&(t[n]=d[n]);for(c&&c(e);m.length;)m.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,s=1;s<a.length;s++){var d=a[s];0!==o[d]&&(n=!1)}n&&(r.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},o={0:0},r=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],d=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var c=d;r.push([83,1]),a()}({38:function(t,e,a){t.exports=a.p+"static/img/logo.5b8857b.png"},39:function(t,e,a){"use strict";var n=a(8);a.n(n).a},76:function(t,e){},79:function(t,e,a){"use strict";var n=a(9);a.n(n).a},8:function(t,e,a){},83:function(t,e,a){"use strict";a.r(e);var n=a(2),o=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("img",{attrs:{src:a(38),width:"150px"}}),this._v(" "),e("router-view")],1)};o._withStripped=!0;var r={name:"App"},i=(a(39),a(10)),s=Object(i.a)(r,o,[],!1,null,null,null);s.options.__file="src/App.vue";var d=s.exports,l=a(18),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"mgr"},[t._m(0),t._v(" "),a("div",{staticClass:"form"},[a("b-table",{attrs:{data:t.rollingstocks,striped:t.isStriped,narrowed:t.isNarrowed},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-table-column",{attrs:{field:"sensor",label:"Sensor",width:"100"}},[t._v("\n            "+t._s(e.row.sensor)+"\n          ")]),t._v(" "),a("b-table-column",{attrs:{field:"rfid",label:"RFID",width:"100"}},[t._v("\n            "+t._s(e.row.rfid)+"\n          ")]),t._v(" "),"unkn"===e.row.roadName?a("div",[a("b-table-column",{attrs:{field:"roadName",label:"Road Name and Number",width:"400"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newRoadName,expression:"newRoadName"}],attrs:{placeholder:"Road Name"},domProps:{value:t.newRoadName},on:{input:function(e){e.target.composing||(t.newRoadName=e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newRoadNumber,expression:"newRoadNumber"}],attrs:{placeholder:"Road Number"},domProps:{value:t.newRoadNumber},on:{input:function(e){e.target.composing||(t.newRoadNumber=e.target.value)}}})]),t._v(" "),a("b-table-column",{attrs:{field:"_id",label:"Action",width:"100"}},[a("a",{attrs:{href:"#"},on:{click:function(a){return t.updateRs(e.row.rfid)}}},[a("b-icon",{attrs:{icon:"check-circle-outline"}})],1)])],1):a("div",["inventory"===e.row.roadNumber?a("div",[a("b-table-column",{attrs:{field:"roadName",label:"Road Name and Number",width:"400"}},[a("span",{staticStyle:{color:"red"}},[t._v("RS not in inventory")])]),t._v(" "),a("b-table-column",{attrs:{field:"_id",label:"Action",width:"100"}},[a("p")])],1):a("div",[a("b-table-column",{attrs:{field:"roadName",label:"Road Name and Number",width:"400"}},[t._v("\n                "+t._s(e.row.roadName)+" "+t._s(e.row.roadNumber)+"\n              ")]),t._v(" "),a("b-table-column",{attrs:{field:"_id",label:"Action",width:"100"}},[a("p")])],1)])]}}])})],1)])])};c._withStripped=!0;var u=a(35),m=a.n(u),f=()=>m.a.create({baseURL:"http://localhost:3000"}),p={updateRs:t=>f().put("rs/"+t.id,t),getRsRfid:t=>f().get("rs_rfid/"+t),getRs:t=>f().get("rs/"+t.id),getRsRoad:t=>f().get("rs_road/"+t)},b=a(36),h=a.n(b).a.connect("http://localhost:3005"),v={name:"Manager",data:()=>({rollingstocks:[],connStatus:"Disconnected",isNarrowed:!0,isStriped:!0,newRoadName:"",newRoadNumber:"",newSensor:""}),mounted(){this.opensocketListener()},methods:{async getRs(t){let e={rfid:"",roadName:"unkn",roadNumber:"",sensor:"rfidRdr01"};e.rfid=t,this.newSensor=e.sensor;const a=await p.getRsRfid(t);""===a.data?this.rollingstocks.unshift(e):(e.roadName=a.data.roadName,e.roadNumber=a.data.roadNumber,this.rollingstocks.unshift(e))},opensocketListener(){h.on("connect",()=>{this.connStatus="Connected"}),h.on("disconnect",()=>{this.connStatus="Disconnected"}),h.on("rfidmsg",t=>{this.getRs(t.rfid),console.log(t)})},async updateRs(t){let e={rfid:t,roadName:this.newRoadName,roadNumber:this.newRoadNumber,sensor:this.newSensor};for(var a=0,n=0;n<this.rollingstocks.length;n++)this.rollingstocks[n].rfid===t&&(a=n);let o=this.newRoadName+"-"+this.newRoadNumber;let r=(await p.getRsRoad(o)).data._id;if(void 0===r)e.roadName="",e.roadNumber="inventory";else{const a=await p.getRs({id:r});console.log(a.data),await p.updateRs({id:r,roadName:e.roadName,roadNumber:e.roadNumber,color:a.data.color,aarCode:a.data.aarCode,description:a.data.description,numberBlt:a.data.numberBlt,inSvcDate:a.data.inSvcDate,insideLength:a.data.insideLength,insideHeight:a.data.insideHeight,insideWidth:a.data.insideWidth,capacity:a.data.capacity,bldr:a.data.bldr,bltDate:a.data.bltDate,notes:a.data.notes,ltWeight:a.data.ltWeight,loadLimit:a.data.loadLimit,lastMaintDate:a.data.lastMaintDate,locationNow:a.data.locationNow,homeLocation:a.data.homeLocation,rsStatus:a.data.rsStatus,imageID:a.data.imageID,modelWeight:a.data.modelWeight,modelLength:a.data.modelLength,rfid:t})}this.rollingstocks[a]=e,this.newRoadName="",this.newRoadNumber=""}}},g=(a(79),Object(i.a)(v,c,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"center"},[e("p",{staticClass:"title is-5"},[this._v("\n        Rollingstock RFID Manager\n      ")])])}],!1,null,"cf96b9a6",null));g.options.__file="src/components/Manager.vue";var w=g.exports;n.default.use(l.a);var N=new l.a({routes:[{path:"*",name:"Manager",component:w}]}),R=a(37),_=a.n(R);a(82);n.default.config.productionTip=!1,n.default.use(_.a),new n.default({data:{rollingstock:[]},router:N,render:t=>t(d)}).$mount("#app")},9:function(t,e,a){}});